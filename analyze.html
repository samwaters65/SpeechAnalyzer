{% extends "basehome.html" %}
{% block title %}Create Post{% endblock %}
{% block content %}
<H1>Speech Results</H1>

<br>

<h4>Basic Speech Information</h4>

<div class="tooltip"><i class="fa fa-info-circle" style = "font-size:20px;color:black"></i>
<span class="tooltiptext">Here are the instructions</span>
</div>

<div style = "font-size:40px padding:20% float:right">
 <b>Relatability Score: {{ relatability }}%</b>
</div>
<br>

<button id = "myBtn">See Parties By Sentence</button>
<div id = "myModal" class = "modal">
<div class = "modal-content">
<div class="modal-header">
<span class="close">&times;</span>
<h2>Parties By Sentence</h2>
</div>
<div class="modal-body">
<ul> 
<li style = "display: inline"><mark class = "conservative">Conservative</mark></li> 
<li style = "display: inline"><mark class = "green">Green</mark></li> 
<li style = "display: inline"><mark class = "liberal">Liberal</mark></li> 
<li style = "display: inline"><mark class = "libertarian">Libertarian</mark></li> 
</ul>
<br>
<p>
{{ html|safe }}
<p>
</div>
<div class="modal-footer">
<h3>End Of Document</h3>
</div>
</div>
</div>
 
 
<script>
var modal = document.getElementById('myModal');
var btn = document.getElementById("myBtn");
var span = document.getElementsByClassName("close")[0];

btn.onclick = function() {
	modal.style.display = "block";
	}
	
span.onclick = function() {
	modal.style.display = "none";
	}
	
window.onclick = function(event) {
	if (event.target == modal) {
		modal.style.display = "none";
		}
	}
</script>


<div class="flexbox">
<div class = "box">
  <script type="text/javascript">
	var dataToUse3 = {{ cd|tojson }};
	var JSONObject3 = JSON.parse(dataToUse3);
    var svg = dimple.newSvg("body", 475, 550);
	svg.append("rect")
      .attr("width", "100%")
      .attr("height", "100%")
      .style("fill", "white")
	  .style("fill-opacity", "0.6");
    var data = JSONObject3;
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "Group");
    chart.addMeasureAxis("y", "Sentiment");
    chart.addSeries(null, dimple.plot.line);
	//chart.ease = "bounce";
	chart.staggerDraw=true;
    chart.draw(1000);
	svg.append("text")
    .attr("x", 150)             
    .attr("y", 30)
    .attr("text-anchor", "center")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Sentiment Over Time");
  </script>
</div>
 

<div class="box">
  <script type="text/javascript">
	var dataToUse4 = {{ politicalDict2|tojson }};
	var JSONObject4 = JSON.parse(dataToUse4);
    var svg = dimple.newSvg("body", 475, 550);
	svg.append("rect")
      .attr("width", "100%")
      .attr("height", "100%")
      .style("fill", "white")
	  .style("fill-opacity", "0.6");
    var data = JSONObject4;
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "PartyName");
    chart.addMeasureAxis("y", "Value");
    chart.addSeries(null, dimple.plot.bar);
	//chart.ease = "bounce";
	chart.staggerDraw=true;
    chart.draw(1000);
	svg.append("text")
    .attr("x", 150)             
    .attr("y", 30)
    .attr("text-anchor", "center")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Party Affiliation");
  </script>
</div>
  
<div class="box">
    <script type="text/javascript">
	var dataToUse7 = {{ politicalDict3|tojson }};
	var JSONObject7 = JSON.parse(dataToUse7);
    var svg = dimple.newSvg("body", 550, 550);
	svg.append("rect")
      .attr("width", "100%")
      .attr("height", "100%")
      .style("fill", "white")
	  .style("fill-opacity", "0.6");
    var data = JSONObject7;
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "Trait");
    chart.addMeasureAxis("y", "Strength");
    chart.addSeries(null, dimple.plot.bar);
	//chart.ease = "bounce";
	chart.staggerDraw=true;
    chart.draw(1000);
	svg.append("text")
    .attr("x", 250)             
    .attr("y", 30)
    .attr("text-anchor", "center")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Personality Traits");
  </script> 
</div>

<div class="box">
  <script type="text/javascript">
	var dataToUse6 = {{ histogramData|tojson }};
	var JSONObject6 = JSON.parse(dataToUse6);
    var svg = dimple.newSvg("body", 600, 600);
	svg.append("rect")
      .attr("width", "100%")
      .attr("height", "100%")
      .style("fill", "white")
	  .style("fill-opacity", "0.6");
    var data = JSONObject6;
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "binName");
    chart.addMeasureAxis("y", "Value");
    chart.addSeries(null, dimple.plot.bar);
	//chart.ease = "bounce";
	chart.staggerDraw=true;
    chart.draw(1000);
	svg.append("text")
    .attr("x", 250)             
    .attr("y", 30)
    .attr("text-anchor", "center")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Sentence Sentiment Distribution");
  </script>
</div>

<div class="box">
 <script type="text/javascript">
	var dataToUse5 = {{ personaDict|tojson }};
	var JSONObject5 = JSON.parse(dataToUse5);
    var svg = dimple.newSvg("body", 600, 600);
	svg.append("rect")
      .attr("width", "100%")
      .attr("height", "100%")
      .style("fill", "white")
	  .style("fill-opacity", "0.6");
    var data = JSONObject5;
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "Persona");
    chart.addMeasureAxis("y", "Strength");
    chart.addSeries(null, dimple.plot.bar);
	//chart.ease = "bounce";
	chart.staggerDraw=true;
    chart.draw(1000);
	svg.append("text")
    .attr("x", 250)             
    .attr("y", 30)
    .attr("text-anchor", "center")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Persona Matching");
  </script>
</div>
 
<div class="box">
  <script type="text/javascript">
	var dataRaw = {{ emotionDict|tojson }};
	var JSONObj = JSON.parse(dataRaw);
    var svg = dimple.newSvg("body", 600, 600);
	svg.append("rect")
      .attr("width", "100%")
      .attr("height", "100%")
      .style("fill", "white")
	  .style("fill-opacity", "0.6");
    var data = JSONObj;
    var chart = new dimple.chart(svg, data);
    chart.addCategoryAxis("x", "Emotion");
    chart.addMeasureAxis("y", "Value");
    chart.addSeries(null, dimple.plot.bar);
	//chart.ease = "bounce";
	chart.staggerDraw=true;
    chart.draw(1000);
	svg.append("text")
    .attr("x", 250)             
    .attr("y", 30)
    .attr("text-anchor", "center")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Emotions");
  </script>
</div>




<div class="box">
<table>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
<tr>
<td>Syllable Count</td>
<td>{{ sylCount }}</td>
</tr>
<tr>
<td>Word Count</td>
<td>{{ lexCount }}</td>
</tr>
<tr>
<td>Sentence Count</td>
<td>{{ sentCount }}</td>
</tr>
<tr>
<td>Est Speech Time</td>
<td>{{ speechTime }}</td>
</tr>
<tr>
<td>Grade Level Comprehension</td>
<td>{{ meanGradeLevel }}</td>
</tr>
</table>
</div>
</div>

{% endblock %}